import sys
import matplotlib.pyplot as plt


if __name__ == '__main__':
    if len(sys.argv) < 2:
        print('usage : get_msg_len.py path_to_log_file')
        sys.exit(1)

    tmp = []
    previous = None
    path = sys.argv[1]
    with open(path, 'r') as content_file:
            for line in content_file:
                beg = line.find('[Tracker-log]')
                if beg != -1:
                    if len(tmp) == 0:
                        previous = line[beg:].split(',')[0].split('"')[0]
                        tmp.append(int(previous.split(' ')[1]))
                    else:
                        rec = line[beg:].split(',')[0].split('"')[0]
                        if rec != previous:
                            previous = rec
                            tmp.append(int(previous.split(' ')[1]))

t = range(0, len(tmp))
plt.plot(t, tmp)

plt.xlabel('Messages sent over time')
plt.ylabel('Size of message (nomber of chars)')
plt.title('Size of messages over time')
plt.grid(True)
plt.show()
